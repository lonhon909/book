## 指令 `directive`

指令是带有 `v-` 前缀的特殊 `attribute`

内置指令
|指令名称|描述|
|-|-|
|v-bind|简写`:`|
|v-on|简写`@`|
|v-if|有条件地渲染元素或者模板片段|
|v-else-if|同 `v-if`|
|v-else|同 `v-if`|
|v-show|设置 `css` 属性 `display` 显示或隐藏|
|v-text|更新元素的文本内容，通过设置元素的 `textContent` 属性来工作|
|v-html|更新元素的 `innerHTML`|
|v-for|渲染成列表|
|v-model|在表单输入元素或组件上创建双向绑定|
|v-slot|简写`#`，用在 `template` 元素或组件上，将部分内容传入子组件的插槽中|
|v-pre|跳过该元素及其所有子元素的编译|
|v-once|仅渲染元素和组件一次，并跳过之后的更新|
|v-memo|用于比较更新前后数据变化，无变化时子树不会更新|
|v-cloak|用于隐藏尚未完成编译的 `DOM` 模板，需配合 `css` 规则 `[v-cloak] { display: none }`|

### 自定义指令

一个自定义指令由一个包含类似组件生命周期钩子的对象来定义

```js
<script setup>
// 在模板中启用 v-focus
const vFocus = {
  mounted: (el) => el.focus()
}
</script>
<template>
  <input v-focus />
</template>
```

在没有使用 `<script setup>` 的情况下，自定义指令需要通过 `directives` 选项注册

```js
export default {
  setup() {
    /*...*/
  },
  directives: {
    // 在模板中启用 v-focus
    focus: {
      /* ... */
    }
  }
}
```

全局注册指令
```js
const app = createApp({})

// 使 v-focus 在所有组件中都可用
app.directive('focus', {
  /* ... */
})
```

指令的钩子函数

+ `created` 在绑定元素的 `attribute` 前或事件监听器应用前调用
+ `beforeMount` 在元素被插入到 `DOM` 前调用
+ <span style="color:#FF0000">`mounted`</span> 挂载完成后调用
+ `beforeUpdate` 绑定元素的父组件更新前调用
+ <span style="color:#FF0000">`updated`</span> 在绑定元素的父组件及他自己的所有子节点都更新后调用
+ `beforeUnmount` 绑定元素的父组件卸载前调用
+ `unmounted` 绑定元素的父组件卸载后调用

```js
<script setup>
const vFocus = {
  mounted(el) {
    el.focus()
  }
}
</script>
<>
  <input v-focus type="text" />
</>
```